from app.classes.sql import Mysql
from app.service.userBalance import UserBalance

class User():

    __USER = "user"

    def __init__(self):

        self.__mysql = Mysql()
        self.__ub = UserBalance()

    def user_info(self, user_id):

        sql = f"Select * from {User.__USER} where id = {int(user_id)}"


        try:
            user_info = self.__mysql.search(sql = sql)
            self.__ub.user_balance(user_id)
            self.__amount = self.__ub.user_amount

        except:

            raise Exception

        finally:
            self.__mysql.close()


        self.__user_data = {
            "user_id" : user_info[0][0],
            "user_name" : user_info[0][1],
            "amount" : float(self.__amount[1])
        }


        return self.__user_data

    @classmethod
    def user_table(cls):

        return cls.__USER